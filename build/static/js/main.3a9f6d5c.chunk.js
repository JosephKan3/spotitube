(this.webpackJsonpspotitube=this.webpackJsonpspotitube||[]).push([[0],{46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){"use strict";a.r(e);var s=a(2),n=a.n(s),i=a(22),c=a.n(i),r=a(8),o=a.n(r),l=a(10),u=a(3),h=a(4),p=a(1),d=a(6),b=a(5),f=a(9),y=a.n(f),v=(a(46),a(47),a(48),a(49),a(0)),j=function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).addTrack=s.addTrack.bind(Object(p.a)(s)),s.removeTrack=s.removeTrack.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"renderAction",value:function(){return this.props.isRemoval?Object(v.jsx)("button",{className:"TrackAction",onClick:this.removeTrack,children:"-"}):Object(v.jsx)("button",{className:"TrackAction",onClick:this.addTrack,children:"+"})}},{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemoval(this.props.track)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"Track",children:Object(v.jsxs)("div",{className:"TrackInformation",children:[Object(v.jsxs)("div",{className:"TrackName",children:[Object(v.jsx)("img",{className:"TrackImage",src:this.props.track.image,alt:this.props.track.name}),Object(v.jsx)("h3",{children:this.props.track.name}),this.renderAction()]}),Object(v.jsxs)("p",{children:[this.props.track.artist," | ",this.props.track.album]})]})})}}]),a}(n.a.Component),m=function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var t=this;return Object(v.jsx)("div",{className:"TrackList",children:this.props.tracks.map((function(e){return Object(v.jsx)(j,{track:e,isRemoval:t.props.isRemoval,onAdd:t.props.onAdd,onRemoval:t.props.onRemoval},e.key)}))})}}]),a}(n.a.Component),k=m,O=function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"SearchResults",children:[Object(v.jsx)("h1",{className:"Subheading",children:"Search Results"}),Object(v.jsx)(k,{tracks:this.props.tracks,isRemoval:!1,onAdd:this.props.onAdd})]})}}]),a}(n.a.Component),g=O,S=(a(51),function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"Navigation",children:[Object(v.jsxs)("h1",{className:"Title",children:["Spot",Object(v.jsx)("span",{className:"Highlight",children:"i"}),"Tube"]}),Object(v.jsxs)("ul",{className:"NavLinks",children:[Object(v.jsx)("li",{className:"NavItem",children:Object(v.jsx)("a",{href:"#spotify",children:"Spotify"})}),Object(v.jsx)("li",{className:"NavItem",children:Object(v.jsx)("a",{href:"#youtube",children:"Youtube"})})]})]})}}]),a}(n.a.Component)),N=S,x=(a(52),function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).state={query:""},s.handleQueryChange=s.handleQueryChange.bind(Object(p.a)(s)),s.search=s.search.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"handleQueryChange",value:function(t){this.setState({query:t.target.value})}},{key:"search",value:function(t){this.props.onSearch(this.state.query)}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"SearchBar",children:[Object(v.jsx)("input",{className:"SearchInput",placeholder:"Enter a Song, Album, or Artist",onChange:this.handleQueryChange}),Object(v.jsx)("button",{className:"SearchButton",onClick:this.search,children:"Search"})]})}}]),a}(n.a.Component)),C=(a(53),function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).state={saveConfirmation:"none"},s.handleNameChange=s.handleNameChange.bind(Object(p.a)(s)),s.handleSave=s.handleSave.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"handleNameChange",value:function(t){this.props.onNameChange(t.target.value)}},{key:"saveConfirmation",value:function(){return"none"===this.state.saveConfirmation?void 0:"saved"===this.state.saveConfirmation?Object(v.jsx)("div",{className:"SaveConfirmation",children:Object(v.jsx)("h3",{children:"Saved!"})}):"error"===this.state.saveConfirmation?Object(v.jsx)("div",{className:"SaveConfirmation",children:Object(v.jsx)("h3",{children:"Error."})}):void 0}},{key:"handleSave",value:function(){var t=Object(l.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.onSave();case 2:a=t.sent,this.setState({saveConfirmation:a});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"Playlist",children:[Object(v.jsx)("input",{className:"PlaylistName",defaultValue:this.props.name,onChange:this.handleNameChange}),Object(v.jsxs)("div",{className:"SaveButtons",children:[Object(v.jsx)("button",{className:"PlaylistSave",onClick:this.props.onLogin,children:"Log in to Spotify"}),Object(v.jsx)("button",{className:"PlaylistSave",onClick:this.handleSave,children:"Save Playlist to Spotify"})]}),this.saveConfirmation(),Object(v.jsx)(k,{tracks:this.props.tracks,isRemoval:!0,onRemoval:this.props.onRemoval})]})}}]),a}(n.a.Component)),T=C,A=(a(54),function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).state={playlistID:""},s.handleSearchPlaylist=s.handleSearchPlaylist.bind(Object(p.a)(s)),s.handlePlaylistChange=s.handlePlaylistChange.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"handleSearchPlaylist",value:function(t){this.props.onFindYoutube(this.state.playlistID)}},{key:"handlePlaylistChange",value:function(t){this.setState({playlistID:t.target.value})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"Youtube",children:[Object(v.jsx)("button",{onClick:this.props.onSign,children:"Sign in to Youtube"}),Object(v.jsx)("input",{className:"PlaylistInput",placeholder:"Enter Youtube Playlist ID",onChange:this.handlePlaylistChange}),Object(v.jsx)("button",{onClick:this.handleSearchPlaylist,children:"Import Youtube Playlist"})]})}}]),a}(n.a.Component)),R=function(t){Object(d.a)(a,t);var e=Object(b.a)(a);function a(t){var s;Object(u.a)(this,a),(s=e.call(this,t)).state={searchResults:[],playlist:{playlistName:"Enter Playlist Name Here",playlistTracks:[]},youtubeCredentials:{},youtubeRedirect:!1,spotifyCredentials:{},spotifyRedirect:!1},s.handleAdd=s.handleAdd.bind(Object(p.a)(s)),s.handleRemoval=s.handleRemoval.bind(Object(p.a)(s)),s.updatePlaylistName=s.updatePlaylistName.bind(Object(p.a)(s)),s.savePlaylist=s.savePlaylist.bind(Object(p.a)(s)),s.search=s.search.bind(Object(p.a)(s)),s.findYoutubePlaylist=s.findYoutubePlaylist.bind(Object(p.a)(s)),s.getYoutubeAccessToken=s.getYoutubeAccessToken.bind(Object(p.a)(s)),s.getSpotifyAccessToken=s.getSpotifyAccessToken.bind(Object(p.a)(s)),s.getYoutubeAuthUrl=s.getYoutubeAuthUrl.bind(Object(p.a)(s)),s.getSpotifyAuthUrl=s.getSpotifyAuthUrl.bind(Object(p.a)(s));var n=JSON.parse(localStorage.getItem("state"));return null!=n&&(s.state=n),s}return Object(h.a)(a,[{key:"handleRemoval",value:function(t){for(var e=this,a=this.state.playlist.playlistTracks,s=-1,n=0;n<a.length;n++)t.key===a[n].key&&(s=n);-1!==s&&(a.splice(s,1),console.log(this.state.searchResults),this.setState({playlist:{playlistName:this.state.playlist.playlistName,playlistTracks:a}},(function(){localStorage.setItem("state",JSON.stringify(e.state))})),console.log(this.state.searchResults))}},{key:"handleAdd",value:function(t){var e=this,a=this.state.playlist.playlistTracks;a.find((function(e){return t.key===e.key}))||(a.push(t),this.setState({playlist:{playlistName:this.state.playlist.playlistName,playlistTracks:a}},(function(){localStorage.setItem("state",JSON.stringify(e.state))})))}},{key:"updatePlaylistName",value:function(t){this.setState({playlist:{playlistName:t,playlistTracks:this.state.playlist.playlistTracks}})}},{key:"getYoutubeAuthUrl",value:function(){var t=this;this.setState({youtubeRedirect:!0},(function(){localStorage.setItem("state",JSON.stringify(t.state)),y.a.get("https://spotitubev2.herokuapp.com/youtube/getAuthUrl").then((function(t){var e=t.data;window.location.replace(e)}))}))}},{key:"getYoutubeAccessToken",value:function(){var t=this;return new Promise((function(e,a){try{var s=decodeURIComponent(window.location.href.match(/code=([^&]*)/)[1]),n=decodeURIComponent(window.location.href.match(/state=([^&]*)/)[1]);y.a.get("https://spotitubev2.herokuapp.com/youtube/token",{params:{authCode:s,authState:n}}).then((function(a){var s=JSON.parse(a.request.responseText);t.setState({youtubeCredentials:s,youtubeRedirect:!1},(function(){localStorage.setItem("state",JSON.stringify(t.state)),e(!0)}))})).catch((function(t){a(!1)}))}catch(i){a(!1)}}))}},{key:"findYoutubePlaylist",value:function(){var t=Object(l.a)(o.a.mark((function t(e){var a,s,n=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0!==this.state.youtubeCredentials.token,s=!1,a){t.next=6;break}return t.next=5,this.getYoutubeAccessToken().catch((function(){s=!1}));case 5:s=t.sent;case 6:s||a?y.a.get("https://spotitubev2.herokuapp.com/youtube/playlist",{params:{playlistID:e,filter:!1,credentials:this.state.youtubeCredentials}}).then((function(t){var e=t.data;n.bulkSearch(e)})):this.getYoutubeAuthUrl();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"bulkSearch",value:function(){var t=Object(l.a)(o.a.mark((function t(e){var a,s=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),a=[],y.a.get("https://spotitubev2.herokuapp.com/spotify/searchToken").then((function(t){for(var n=0;n<e.length;n++)a.push(y.a.get("https://spotitubev2.herokuapp.com/spotify/search",{params:{query:e[n],token:t.data}}));Promise.all(a).then((function(t){var e=t.map((function(t){return t.data[0]})),a=e.filter((function(t){return void 0!==t}));console.log(a),s.setState({playlist:{playlistName:s.state.playlistName,playlistTracks:a}},(function(){localStorage.setItem("state",JSON.stringify(s.state))}))}))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"search",value:function(t){var e=this;console.log("Searching for: ".concat(t,".")),y.a.get("https://spotitubev2.herokuapp.com/spotify/searchToken").then((function(a){y.a.get("https://spotitubev2.herokuapp.com/spotify/search",{params:{query:t,token:a.data}}).then((function(t){e.setState({searchResults:t.data},(function(){localStorage.setItem("state",JSON.stringify(e.state))}))}))}))}},{key:"getSpotifyAuthUrl",value:function(){var t=this;this.setState({spotifyRedirect:!0},(function(){y.a.get("https://spotitubev2.herokuapp.com/spotify/getAuthUrl").then((function(e){localStorage.setItem("state",JSON.stringify(t.state));var a=e.data;window.location.replace(a)}))}))}},{key:"getSpotifyAccessToken",value:function(t){var e=this;return new Promise((function(a,s){e.state.spotifyRedirect&&y.a.get("https://spotitubev2.herokuapp.com/spotify/token",{params:{authCode:t}}).then((function(t){e.setState({spotifyCredentials:t.data,spotifyRedirect:!1},(function(){localStorage.setItem("state",JSON.stringify(e.state)),a()}))})).catch((function(t){s(t)}))}))}},{key:"savePlaylist",value:function(){var t=Object(l.a)(o.a.mark((function t(){var e=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(o.a.mark((function t(a,s){var n,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.state.spotifyCredentials.access_token){t.next=12;break}if(e.state.spotifyRedirect){t.next=8;break}console.log("ONE"),e.getSpotifyAuthUrl(),s("authenticating"),t.next=12;break;case 8:return console.log("TWO"),n=decodeURIComponent(window.location.href.match(/code=([^&]*)/)[1]),t.next=12,e.getSpotifyAccessToken(n);case 12:i=e.state.playlist.playlistTracks.map((function(t){return t.uri})),console.log("THREE"),y.a.get("https://spotitubev2.herokuapp.com/spotify/savePlaylist",{params:{playlistName:e.state.playlist.playlistName,playlistTracks:encodeURIComponent(JSON.stringify(i)),credentials:e.state.spotifyCredentials}}).then((function(t){t.status<400?(e.setState({spotifyCredentials:t.data}),a("saved")):a("error")}));case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("div",{className:"SpotifyBox",children:[Object(v.jsx)(N,{}),Object(v.jsx)(x,{onSearch:this.search}),Object(v.jsx)(A,{onFindYoutube:this.findYoutubePlaylist,onSign:this.getYoutubeAuthUrl}),Object(v.jsxs)("div",{className:"Tracks",children:[Object(v.jsx)(g,{tracks:this.state.searchResults,isRemoval:!1,onAdd:this.handleAdd}),Object(v.jsx)(T,{name:this.state.playlist.playlistName,onNameChange:this.updatePlaylistName,tracks:this.state.playlist.playlistTracks,isRemoval:!0,onRemoval:this.handleRemoval,onLogin:this.getSpotifyAuthUrl,onSave:this.savePlaylist})]})]})})}}]),a}(n.a.Component),P=R,I=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),s(t),n(t),i(t),c(t)}))};c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root")),I()}},[[55,1,2]]]);
//# sourceMappingURL=main.3a9f6d5c.chunk.js.map